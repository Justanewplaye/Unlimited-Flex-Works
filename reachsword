local player = game.Players.LocalPlayer

local function applyReach()
    local char = player.Character or player.CharacterAdded:Wait()

    local function onToolEquipped(tool)
        if tool:IsA("Tool") then
            local handle = tool:FindFirstChild("Handle")
            if handle then
                handle.Touched:Connect(function(hit)
                    local enemy = hit.Parent
                    local enemyHumanoid = enemy and enemy:FindFirstChildOfClass("Humanoid")

                    if enemyHumanoid and enemy ~= char then
                        local distance = (char.PrimaryPart.Position - enemy.PrimaryPart.Position).Magnitude

                        if distance <= 50 then -- Reach distance
                            firetouchinterest(handle, hit, 0) -- Simulate touch
                            firetouchinterest(handle, hit, 1)
                        end
                    end
                end)
            end
        end
    end

    -- Detect when a tool is equipped
    char.ChildAdded:Connect(function(child)
        if child:IsA("Tool") then
            onToolEquipped(child)
        end
    end)

    -- Apply to already equipped tools
    for _, tool in ipairs(char:GetChildren()) do
        if tool:IsA("Tool") then
            onToolEquipped(tool)
        end
    end
end

-- Reapply reach on respawn
player.CharacterAdded:Connect(function()
    wait(1) -- Small delay to prevent errors
    applyReach()
end)

-- Run the script initially
applyReach()
